import{g as l,i as N,c,a as x,S as $,t as m,s as b,d as P,b as d,r as I,u as D,F}from"./web.c6b95cf4.js";const L=m("<p py-3 text-slate leading-relaxed break-words></p>"),v=m("<img h-40 mx-auto my-4>"),y=({paragraph:t,solidParagraph:r})=>[(()=>{const n=l(L);return N(n,()=>t?t.content():r?.content),n})(),c($,{get when(){return t&&t.image()},get children(){const n=l(v);return x(()=>b(n,"src",t?.image())),n}}),c($,{get when(){return r&&r.image},get children(){const n=l(v);return x(()=>b(n,"src",r?.image)),n}})],T=m('<div class="flex items-center gap-2"><input type="text" id="input" w-full my-4 px-3 h-12 text-xl text-slate border="~ white/20" bg="white/2" ring-0 focus="ring-0 outline-none"><button h-12 px-4 py-2 bg="white op-2 hover" border="~ white/20" text-slate>Submit</button></div>'),A=()=>{let t;const[r,n]=d([]),[o,u]=d(""),[p,h]=d(""),_=()=>r().map(e=>e.content).join(`
`),S=async()=>{const e=t.value;u(e);const a=await fetch(`/api/generate?input=${_()+e}`);if(!a.ok)throw new Error(a.statusText);const s=a.body;if(!s)throw new Error("No data");const i=s.getReader(),k=new TextDecoder("utf-8");let g=!1;for(;!g;){const{value:f,done:R}=await i.read();if(f){const w=k.decode(f);w===`
`&&o()!==""?g=!0:u(o()+w)}g=R}const C=await E(o());h(C),n([...r(),{content:o(),image:p()}]),u(""),h(""),t.value=""},E=async e=>await(await fetch(`/api/image?input=${e}`)).text();return[c(F,{get each(){return r()},children:e=>c(y,{solidParagraph:e})}),c(y,{paragraph:{content:o,image:p}}),(()=>{const e=l(T),a=e.firstChild,s=a.nextSibling,i=t;return typeof i=="function"?D(i,a):t=a,s.$$click=S,I(),e})()]};P(["click"]);export{A as default};
